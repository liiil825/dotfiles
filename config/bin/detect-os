#!/usr/bin/env bash

platform='unknown'
unamestr=$(uname)
detect_os() {
  if [[ "$unamestr" == 'Linux' ]]; then
    platform='linux'
  elif [[ "$unamestr" == 'Darwin' ]]; then
    platform='macos'
  fi
}

detect_detail_os() {
  if [[ $(uname -n) == *'-opencloudos' ]]; then
    platform='opencloudos'
  elif [[ $(uname -r) == *'arch'* ]]; then
    platform='archlinux'
  elif [[ "$unamestr" == 'Linux' ]]; then
    platform='linux'
  elif [[ "$unamestr" == 'Darwin' ]]; then
    platform='macos'
  fi
}

if [ "$1" ]; then
  case "$1" in
  '-r') detect_detail_os ;;
  esac
else
  detect_os
fi

echo $platform
